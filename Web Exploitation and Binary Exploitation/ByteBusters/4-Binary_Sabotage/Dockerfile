FROM ubuntu:22.04

RUN apt update && apt install -y socat python3

COPY chall /app/chall
COPY run.py /app/run.py
COPY flag.txt /flag.txt

RUN chmod +x /app/chall

WORKDIR /app

ENTRYPOINT ["socat", "TCP-LISTEN:1337,reuseaddr,fork", "EXEC:\"timeout 20 python3 /app/run.py\""]
